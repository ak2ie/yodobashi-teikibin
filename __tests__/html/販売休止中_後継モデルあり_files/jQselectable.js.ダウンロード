/**
 * jQselectable
 *
 * @author     : nori (norimania@gmail.com)
 * @copyright  : 5509 (http://5509.me/)
 * @license    : The MIT License
 * @link       : http://5509.me/log/jqueryselectable
 * @repository : https://github.com/5509/jQselectable
 * @modified   : 2011-11-06 23:10
 * @since      : 2008-09-14 02:34
 */
!function(t){function e(t){return trimSpace(t)}var i=function(e,i,s){var a;a=t.browser.msie&&t.browser.version<8?-9:-2,this.conf={style:"selectable",set:"show",out:"hide",setDuration:"normal",outDuration:"normal",opacity:1,top:a,left:0,callback:null},this.temp={selectable:'<div class="sctble_cont"></div>',simpleBox:'<div class="cateSlctPd"></div>'},t.extend(this.conf,i||{}),t.extend(this.temp,s||{}),this.target=t(e),this.matHeight=0,this.attrs={id:this.target.attr("id"),cl:this.target.attr("class")},this.generatedFlg=!1,this.init()};i.prototype={init:function(){this.build(),this.bind_events(),this.generatedFlg=!0;var e=this;t("#getJsonData").focus(function(){e.mat.hide()})},disabled:function(){if(!this.clickBlocker){var e=this,i=this.m_input,s=i.offset();this.clickBlocker=t("<div></div>").css({width:i.attr("offsetWidth"),height:i.attr("offsetHeight"),position:"absolute",top:s.top,left:s.left,background:"#fff",opacity:0}),t(window).resize(function(){s=i.offset(),e.clickBlocker.css({top:s.top,left:s.left})}),t("body").append(this.clickBlocker),this.m_input.addClass("disabled").unbind(),this.mat.unbind(),t("a",this.mat).unbind(),t('label[for="'+this.attrs.id+'"]').unbind()}},enabled:function(){this.clickBlocker&&(this.clickBlocker.remove(),this.clickBlocker=null,this.m_input.removeClass("disabled"),this.bind_events())},rebuild:function(){this.m_input.unbind(),this.mat.unbind(),t("a",this.mat).unbind(),t('label[for="'+this.attrs.id+'"]').unbind(),this.build(),this.bind_events()},build:function(){var i=t("optgroup",this.target).length>0;var s=this;var a=function(i,a){var n;n=t(i.attr("disabled")?'<span class="disabled"></span>':'<a class="'+i.attr("class")+'"></a>'),t(a).append(n),n.text(i.text()).attr({href:"#"+encodeURI(i.text()),name:i.val()}),i.is(":selected")&&(s.m_text.text(e(i.text())),n.addClass("selected")),i.hasClass("br")&&n.after("<br/>")};if(!this.m_input){this.m_input=t("<a></a>"),this.m_text=t("<span></span>");var n=this.conf.style.match(/simple/)?"sBox":"";this.m_input.append(this.m_text).attr({id:this.attrs.id+"_dummy",href:"javascript:void(0)"}).addClass("cateSlctDisplay").addClass(n).addClass(this.attrs.cl).insertAfter(this.target),this.target.css("display","none"),this.mat=t("<div></div>"),"simple"==n?this.mat.append(this.temp.selectable):this.mat.append(this.temp.simpleBox),this.mat.addClass(n).addClass(this.attrs.cl)}if(this.generatedFlg&&(this.mat.empty(),"simple"==n?this.mat.append(this.temp.selectable):this.mat.append(this.temp.simpleBox)),this._div=t('<div class="cateSlctPdBody"></div>'),i){this.mat.addClass("otpgroup");var o=t("optgroup",this.target);var c=[];for(var l=0;l<o.length;l++)c[l]=t("option",o[l]);var r=t("<dl></dl>");for(var l=0;l<o.length;l++){var d=t("<dt></dt>");d.text(t(o[l]).attr("label"));var h=t("<dd></dd>");for(var p=0;p<c[l].length;p++)a(t(c[l][p]),h);r.append(d).append(h)}this._div.append(r).addClass("optg"),t("div",this.mat).append(this._div)}else{var c=t("option",this.target);for(var l=0;l<c.length;l++)a(t(c[l]),this._div);t("div",this.mat).append(this._div)}t("#cateSel_defaultDummy").remove(),this.generatedFlg||(t("body").append(this.mat),this.mat.addClass("cateSel_mat").css({position:"absolute",zIndex:1e3,display:"none"})),document.all&&"undefined"==typeof document.body.style.maxHeight?this.conf.height<this.mat.height()&&t(this._div).css("height",this.conf.height):t(this._div).css("maxHeight",this.conf.height),this.mat.css("display","block"),this.matHeight=this.mat.attr("offsetHeight"),this.mat.css("display","none")},bind_events:function(){var i=this;var s=!0;var a=function(){var t,e=document.documentElement.scrollTop||document.body.scrollTop,s=document.documentElement.clientHeight||document.body.clientHeight,a=i.m_input.offset();t=s/2<a.top-e?a.top-i.matHeight+i.conf.top-5:a.top+1.3*i.m_input.height()+i.conf.top;var n=t-7;var o=a.left+i.conf.left-0;jQuery.browser.msie&&(8==parseInt(jQuery.browser.version)?(n=t-6,o=a.left+i.conf.left-3):7==parseInt(jQuery.browser.version)?(n=t-6,o=a.left+i.conf.left-3):6==parseInt(jQuery.browser.version)&&(n=t-10,o=a.left+i.conf.left-3)),i.mat.css({top:n,left:o})};t(window).resize(function(){a()});var n=function(){var e=t(".cateSel_mat");switch(i.conf.out){case"slideUp":e.slideUp(i.conf.outDuration);break;case"fadeOut":e.fadeOut(i.conf.outDuration);break;default:e.css("display","none")}};var o=function(){if(n(),"slideDown"==i.conf.set){var e=document.documentElement.scrollTop||document.body.scrollTop,a=document.documentElement.clientHeight||document.body.clientHeight,o=i.m_input.offset(),c=a/2<o.top-e;c&&i.mat.css("top",o.top+i.conf.top-5)}"slideDown"==i.conf.set?c?i.mat.animate({height:"toggle",top:parseInt(i.mat.css("top"))-i.matHeight},{easing:"swing",duration:i.conf.setDuration}).css("opacity",i.conf.opacity):i.mat.slideDown(i.conf.setDuration).css("opacity",i.conf.opacity):"fadeIn"==i.conf.set?i.mat.css({display:"block",opacity:0}).fadeTo(i.conf.setDuration,i.conf.opacity):i.mat.css("display","block"),t("body, a").not("a.cateSlctDisplay").click(function(){t(".srcCateContents").removeClass("focus"),n()}).not("a").keyup(function(t){"27"==t.keyCode&&(s=!1,i.m_input.blur(),n())})};t.browser.msie&&t.browser.version<8&&t(".cateSel_mat").css("background-color","white"),this.m_input.click(function(t){return!i.mat.is(":visible")&&(a(),o(),t.stopPropagation(),!1)}).keyup(function(t){s?(a(),o(),t.stopPropagation()):s=!0}),this.mat.click(function(t){t.stopPropagation()}),t("body, a").not("a.cateSlctDisplay").click(function(){t(".srcCateContents").removeClass("focus"),n()}).not("a").keyup(function(t){"27"==t.keyCode&&(s=!1,i.m_input.blur(),n())}),t("a",this.mat).click(function(){var a=t(this);return i.m_text.text(e(decodeURI(a.attr("href").split("#")[1]))),t("option",i.target).each(function(){t(this).removeAttr("selected")}),a.attr("name")?t('option[value="'+a.attr("name")+'"]',i.target).attr("selected","selected"):t('option[value=""]',i.target).attr("selected","selected"),t("#cateSel").trigger("change"),t(".selected",i.mat).removeClass("selected"),a.addClass("selected"),s=!1,n(),i.m_input.focus(),i.conf.callback&&"function"==typeof i.conf.callback&&i.conf.callback.call(i.target),!1}),t('label[for="'+this.attrs.id+'"]').click(function(t){return a(),o(),t.stopPropagation(),!1})}},t.fn.jQselectable=function(e,s){if(t(this).length>1){var a=[];return t(this).each(function(t){a[t]=new i(this,e,s)}),a}return new i(this,e,s)},jQuery.fn.selectable||(t.fn.selectable=t.fn.jQselectable)}(jQuery);